<!-- Toolbar -->
<div class="toolbar" role="banner">
  <button mat-button [matMenuTriggerFor]="menu" class="lists">
    <mat-icon aria-hidden="false">list</mat-icon>Wybierz listę...
  </button>
  <mat-menu #menu="matMenu">
    <button mat-menu-item class="menu-button" (click)="onBooksList(); bookListShow()">Książki</button>
    <button mat-menu-item class="menu-button" (click)="onBookCopiesList(); bookCopiesListShow()" >Egzemplarze książek</button>
    <button mat-menu-item class="menu-button" (click)="onAllBorrowingsList(); allBorrowingListShow()" *ngIf="librarianButton">Wypożyczenia</button>
    <button mat-menu-item class="menu-button" (click)="onMyBorrowingsList(); myBorrowingListShow()" *ngIf="userButton">Moje wypożyczenia</button>
  </mat-menu>
  <button mat-button (click)="openAddBookDialog()" *ngIf="librarianButton">
    <mat-icon aria-hidden="false" aria-label="Example home icon">book</mat-icon> Dodaj książkę
  </button>
  <button mat-button (click)="openCopyBookDialog()" *ngIf="librarianButton">
    <mat-icon aria-hidden="false" aria-label="Example home icon">content_copy</mat-icon> Dodaj kopię
  </button>
  <button mat-button (click)="hello()">
    <mat-icon aria-hidden="false" aria-label="Example home icon">check</mat-icon> hello
  </button>
  <button mat-button (click)="nice()">
    <mat-icon aria-hidden="false" aria-label="Example home icon">check</mat-icon> nice
  </button>
  <button mat-button (click)="helloUser()">
    <mat-icon aria-hidden="false" aria-label="Example home icon">check</mat-icon>hello user
  </button>
  <button mat-button (click)="helloLibr()">
    <mat-icon aria-hidden="false" aria-label="Example home icon">check</mat-icon> hello librarian
  </button>
  <div class="spacer"></div>
  Zalogowano jako: {{this.user.name}}
  <button  mat-button (click)="logOut()">
    <mat-icon aria-hidden="false" aria-label="Example home icon">logout</mat-icon>
  </button>
</div>

<div class="content" role="main">

<!--  Ksiazki-->
  <div *ngIf="bookList" class="tab">
    <table mat-table
           [dataSource]="book" multiTemplateDataRows
           class="mat-elevation-z8">
      <ng-container matColumnDef="{{column}}" *ngFor="let column of displayedColumnsBook">
        <th mat-header-cell *matHeaderCellDef> {{column}} </th>
        <td mat-cell *matCellDef="let element"> {{element[column]}} </td>
      </ng-container>

      <!-- Expanded Content Column - The detail row is made up of this one column that spans across all columns -->
      <ng-container matColumnDef="expandedDetail">
        <td mat-cell *matCellDef="let element" [attr.colspan]="displayedColumnsBook.length">
          <div class="example-element-detail"
               [@detailExpand]="element == expandedElement ? 'expanded' : 'collapsed'">
            <div class="example-element-diagram">
              <div class="example-element-position"> {{element.id}} </div>
              <div class="example-element-symbol"> {{element.author}} </div>
              <div class="example-element-name"> {{element.genre}} </div>
              <div class="example-element-weight"> {{element.title}} </div>
            </div>
            <div class="example-element-description">
              {{element.description}}
            </div>
          </div>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumnsBook"></tr>
      <tr mat-row *matRowDef="let element; columns: displayedColumnsBook;"
          class="example-element-row"
          [class.example-expanded-row]="expandedElement === element"
          (click)="expandedElement = expandedElement === element ? null : element">
      </tr>
      <tr mat-row *matRowDef="let row; columns: ['expandedDetail']" class="example-detail-row"></tr>
    </table>
  </div>

<!--Kopie ksiazek-->
  <div *ngIf="bookCopiesList" class="tab">
  <!--
  <mat-form-field appearance="standard">
    <mat-label>Filter</mat-label>
    <input matInput (keyup)="applyFilter($event)" placeholder="Wyszukaj..." autocomplete="off" #input>
  </mat-form-field>
  -->
  <table mat-table [dataSource]="bookCopy" class="mat-elevation-z8" *ngIf="bookCopiesList">

    <ng-container matColumnDef="id">
      <th mat-header-cell *matHeaderCellDef> ID </th>
      <td mat-cell *matCellDef="let element"> {{element.id}} </td>
    </ng-container>

    <ng-container matColumnDef="isbn">
      <th mat-header-cell *matHeaderCellDef> ISBN </th>
      <td mat-cell *matCellDef="let element"> {{element.isbn}} </td>
    </ng-container>

    <ng-container matColumnDef="page_amount">
      <th mat-header-cell *matHeaderCellDef> Liczba stron </th>
      <td mat-cell *matCellDef="let element"> {{element.pageAmount}} </td>
    </ng-container>

    <ng-container matColumnDef="publish_date">
      <th mat-header-cell *matHeaderCellDef> Data publikacji </th>
      <td mat-cell *matCellDef="let element"> {{element.publishDate}} </td>
    </ng-container>

    <ng-container matColumnDef="publisher">
      <th mat-header-cell *matHeaderCellDef> Wydawca </th>
      <td mat-cell *matCellDef="let element"> {{element.publisher}} </td>
    </ng-container>

<!--    <ng-container matColumnDef="book_id">-->
<!--      <th mat-header-cell *matHeaderCellDef> ID książki </th>-->
<!--      <td mat-cell *matCellDef="let element"> {{element.book.id}} </td>-->
<!--    </ng-container>-->

    <ng-container matColumnDef="status">
      <th mat-header-cell *matHeaderCellDef> Status </th>
      <td mat-cell *matCellDef="let element"> {{element.status}} </td>
    </ng-container>

          <ng-container matColumnDef="action">
            <th mat-header-cell *matHeaderCellDef> Akcja </th>
            <td mat-cell *matCellDef="let element">
              <button mat-button>
                <mat-icon aria-hidden="false" aria-label="Example home icon" matTooltip="Edytuj wiersz">mode_edit</mat-icon>
              </button>
              <button mat-button>
                <mat-icon aria-hidden="false" aria-label="Example home icon" matTooltip="Usuń wiersz">delete</mat-icon>
              </button>
              <button mat-button (click)="reservateBook(element.id)">
                <mat-icon aria-hidden="false" aria-label="Example home icon" matTooltip="Zarezerwuj">book</mat-icon>
              </button>
              <button mat-button (click)="confirmBorrow()">
                <mat-icon aria-hidden="false" aria-label="Example home icon" matTooltip="Zatwierdź wypożyczenie">check_circle</mat-icon>
              </button>
            </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumnsBookCopy"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumnsBookCopy;"></tr>
          <!--
          <tr class="mat-row" *matNoDataRow>
            <td class="mat-cell" colspan="4">No data matching the filter "{{input.value}}"</td>
          </tr>-->
  </table>
  </div>


<!--  Wszystkie wypozyczenia-->
  <div *ngIf="allBorrowingList" class="tab">

    <table mat-table [dataSource]="allBorrowing" class="mat-elevation-z8" *ngIf="allBorrowingList">

      <ng-container matColumnDef="id">
        <th mat-header-cell *matHeaderCellDef> ID </th>
        <td mat-cell *matCellDef="let element"> {{element.id}} </td>
      </ng-container>

      <ng-container matColumnDef="borrow_end_time">
        <th mat-header-cell *matHeaderCellDef> Data końcowa wypożyczenia </th>
        <td mat-cell *matCellDef="let element"> {{element.borrowEndTime}} </td>
      </ng-container>

      <ng-container matColumnDef="borrow_start_time">
        <th mat-header-cell *matHeaderCellDef> Data początkowa wypożyczenia </th>
        <td mat-cell *matCellDef="let element"> {{element.borrowStartTime}} </td>
      </ng-container>

      <ng-container matColumnDef="reservation_time">
        <th mat-header-cell *matHeaderCellDef> Czas rezerwacji </th>
        <td mat-cell *matCellDef="let element"> {{element.reservationTime}} </td>
      </ng-container>

      <ng-container matColumnDef="status">
        <th mat-header-cell *matHeaderCellDef> Status </th>
        <td mat-cell *matCellDef="let element"> {{element.status}} </td>
      </ng-container>

      <ng-container matColumnDef="book_copy_id">
        <th mat-header-cell *matHeaderCellDef> ID egzemplarza książki </th>
        <td mat-cell *matCellDef="let element"> {{element.bookCopy.id}} </td>
      </ng-container>

      <ng-container matColumnDef="user_id">
        <th mat-header-cell *matHeaderCellDef> ID użytkownika </th>
        <td mat-cell *matCellDef="let element"> {{element.user.name}} </td>
      </ng-container>

      <ng-container matColumnDef="action">
        <th mat-header-cell *matHeaderCellDef> Usuń </th>
        <td mat-cell *matCellDef="let element">
          <button mat-button>
            <mat-icon aria-hidden="false" aria-label="Example home icon" matTooltip="Usuń wiersz">delete</mat-icon>
          </button>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedBorrowings"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedBorrowings;"></tr>

    </table>
  </div>
</div>


